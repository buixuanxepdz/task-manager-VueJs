"use strict";(self["webpackChunkproject_vue"]=self["webpackChunkproject_vue"]||[]).push([[498],{6498:function(a,t,e){e.r(t),e.d(t,{default:function(){return m}});var s=function(){var a=this,t=a._self._c;return t("div",{staticClass:"container"},[t("el-container",[t("el-main",[t("div",{staticClass:"content animate__animated animate__fadeInDown"},[t("div",{staticClass:"image"},[t("form",[a.avatar||a.url?t("div",{staticClass:"preview",attrs:{title:"Cập nhật avatar"}},[a.url?t("img",{attrs:{src:a.url}}):t("img",{attrs:{src:`http://vuecourse.zent.edu.vn/storage/users/${a.avatar}`,alt:""}}),t("i",{staticClass:"fa-solid fa-xmark",attrs:{title:"Hủy"},on:{click:a.close}})]):t("div",{staticClass:"preview",attrs:{title:"Cập nhật avatar"},on:{click:a.changeImg}},[t("img",{attrs:{src:"https://cdn-icons-png.flaticon.com/512/149/149071.png"}}),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file",attrs:{id:"inpt",type:"file"},on:{change:a.onFileChange}})]),t("el-row",[t("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"danger"},on:{click:a.updateAvatar}},[a._v("Lưu")])],1)],1)]),t("div",{staticClass:"profile"},[t("el-tabs",{attrs:{type:"border-card"}},[t("el-tab-pane",{attrs:{label:"Thông tin cá nhân"}},[t("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:a.dynamicValidateForm}},[t("el-form-item",{attrs:{prop:"email",rules:[{required:!0,message:"Vui lòng nhập Email",trigger:"blur"},{type:"email",message:"Vui lòng nhập địa chỉ email chính xác",trigger:["blur","change"]}]}},[t("el-input",{attrs:{disabled:!0,placeholder:"Email"},model:{value:a.dynamicValidateForm.email,callback:function(t){a.$set(a.dynamicValidateForm,"email",t)},expression:"dynamicValidateForm.email"}})],1),t("el-form-item",{attrs:{prop:"name",rules:[{required:!0,message:"Vui lòng nhập họ tên",trigger:"blur"}]}},[t("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"Họ tên"},model:{value:a.dynamicValidateForm.name,callback:function(t){a.$set(a.dynamicValidateForm,"name",t)},expression:"dynamicValidateForm.name"}})],1),t("el-form-item",{staticClass:"button"},[t("div",{staticClass:"inner"}),t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return a.submitForm("dynamicValidateForm")}}},[a._v("Cập nhật")])],1)],1)],1),t("el-tab-pane",{attrs:{label:"Đổi mật khẩu"}},[t("el-form",{ref:"changePass",staticClass:"demo-dynamic",attrs:{model:a.changePass,rules:a.rules}},[t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"Mật khẩu"},model:{value:a.changePass.password,callback:function(t){a.$set(a.changePass,"password",t)},expression:"changePass.password"}})],1),t("el-form-item",{attrs:{prop:"checkPass"}},[t("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"Nhập lại mật khẩu"},model:{value:a.changePass.checkPass,callback:function(t){a.$set(a.changePass,"checkPass",t)},expression:"changePass.checkPass"}})],1),t("el-form-item",{staticClass:"button"},[t("div",{staticClass:"inner"}),t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return a.formChangePass("changePass")}}},[a._v("Cập nhật")])],1)],1)],1)],1)],1)])])],1)],1)},r=[],i=(e(1703),e(7877)),n=e(3822),l={name:"ProfileView",data(){var a=(a,t,e)=>{""===t?e(new Error("Vui lòng nhập mật khẩu")):t.length<6?e(new Error("Mật khẩu phải từ 6 kí tự")):(""!==this.changePass.checkPass&&this.$refs.changePass.validateField("checkPass"),e())},t=(a,t,e)=>{""===t?e(new Error("Vui lòng nhập lại mật khẩu")):t.length<6?e(new Error("Mật khẩu phải từ 6 kí tự")):t!==this.changePass.password?e(new Error("Mật khẩu nhập lại chưa khớp")):e()};return{dynamicValidateForm:{domains:[{key:1,value:""}],email:"",name:""},changePass:{password:"",checkPass:""},rules:{password:[{validator:a,trigger:"blur"}],checkPass:[{validator:t,trigger:"blur"}]},url:"",avatar:""}},methods:{...(0,n.OI)("user",["handleAvatar"]),submitForm(a){this.$refs[a].validate((a=>{if(!a)return!1;{let a=new FormData;a.append("name",this.dynamicValidateForm.name),i.Z.updateProfile(a).then((a=>{200==a.status&&this.$notify({title:"Thành công",message:"Cập nhật thành công",type:"success"})})).catch()}}))},formChangePass(a){this.$refs[a].validate((a=>{if(!a)return!1;{let a=new URLSearchParams;a.append("password",this.changePass.password),a.append("password_confirmation",this.changePass.checkPass),i.Z.updatePassword(a).then((a=>{200==a.status&&this.$notify({title:"Thành công",message:"Cập nhật mật khẩu thành công",type:"success"})})).catch()}}))},updateAvatar(){let a=new FormData;this.avatar&&a.append("avatar",this.avatar),i.Z.updateProfile(a).then((a=>{200==a.status&&(this.$notify({title:"Thành công",message:"Cập nhật avatar thành công",type:"success"}),this.getAuth())})).catch()},onFileChange(a){const t=a.target.files[0];this.url=URL.createObjectURL(t),this.avatar=t},changeImg(){this.$refs.file.click()},close(){this.url="",this.avatar=""},getAuth(){i.Z.getAuthUser().then((a=>{this.dynamicValidateForm.name=a.data.name,this.dynamicValidateForm.email=a.data.email,this.avatar=a.data.avatar,this.handleAvatar(a.data.avatar)})).catch()}},mounted(){this.getAuth(),document.title="Thông tin cá nhân"},computed:{}},c=l,h=e(1001),o=(0,h.Z)(c,s,r,!1,null,"260d212c",null),m=o.exports}}]);
//# sourceMappingURL=498.59bab29d.js.map